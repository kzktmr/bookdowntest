[["index.html", "RでGIS はじめに", " RでGIS Kazuki Tamura (@kzktmr) 2021-07-18 はじめに この資料では，Rで地理情報データを扱う方法について，解説します。 "],["事前準備.html", "1 事前準備 1.1 RとRstudioのインストール 1.2 使用するパッケージについて", " 1 事前準備 1.1 RとRstudioのインストール CRANからRをインストールしてください。 RStudioからRStudio Desktop (Open Source License)をインストールしてください。 1.2 使用するパッケージについて tidyverse sf などを使用する予定です。事前にインストールしておいてください。パッケージのインストールには，RStudioのPackagesパネルからInstallする方法や，コンソールに install.packages(&quot;tidyverse&quot;) と入力する方法がありますが，どちらでも構いません。 "],["gisの基礎知識.html", "2 GISの基礎知識 2.1 GISデータのフォーマット 2.2 測地系 2.3 地図投影変換", " 2 GISの基礎知識 2.1 GISデータのフォーマット 現在流通しているGISデータのファイル形式のうち，代表的な以下の2つを紹介します。 シェープファイル GeoJSON シェープファイルは現在デファクトスタンダードとなっているGISデータのファイル形式で， ESRI社（ArcGISなどのGIS製品で有名）によって開発・規格化されました。 GeoJSONは，JSON（JavaScript Object Notation）を元に開発されたフォーマットです。 GeoJSONのファイルはテキストファイルなので，テキストエディタで閲覧・編集することも可能です。 2.1.1 Simple Featuresとは Simple Features（正式にはSimple Feature Access）は， GISで使用される点・線・多角形などの幾何学図形からなるGISデータの，コンピュータ内部での保存およびアクセス方法に関する標準規格です。 Open Geospatial Consortium (OGC)とInternational Organization for Standardization (ISO)によって規格化されています。 このSimple FeaturesをRで実現するためのパッケージがsfです。 2.2 測地系 日本の測地系 2.3 地図投影変換 平面直角座標系 2.3.1 EPSGコード 世界の様々な測地系や地図投影法に対して，ユニークなID 番号を振り分けたものです。 International Association of Oil ＆ Gas Producers (IOGP）のGeomatics Committeeによって管理されています。 epsg.org，epsg.io などのサイトでEPSGコードを検索することができます。 "],["コロプレスマップ塗り分け地図.html", "3 コロプレス・マップ（塗り分け地図） 3.1 概要 3.2 データの準備 3.3 地図の描画 3.4 地図投影変換", " 3 コロプレス・マップ（塗り分け地図） 3.1 概要 コロプレスマップ（塗り分け地図）を作成する方法を説明します。 佐賀県の市町村別人口密度の塗り分け地図を作成しましょう。 3.2 データの準備 「佐賀県オープンデータカタログサイト」にある「オープンデータマップ用データセット」を使用します。 男女別人口総数及ひ世帯総数（市町村別） ポリゴン（市町村別） 上記2つのファイル（410004saga.xlsxと410004saga.geojson）をダウンロードしてください。 ワーキングディレクトリの直下にdataフォルダを作成し，ダウンロードしたファイルを保存してください（今後，GISデータはこのフォルダに保存することにしましょう）。 3.3 地図の描画 まず，使用するライブラリを読み込みます。ここでは，tidyverse（地図の描画に使うggplot2ライブラリが含まれています）に加えて，GISデータを扱うライブラリsfを使用します。 library(tidyverse) ## ─ Attaching packages ──────────────────── tidyverse 1.3.1 ─ ## ✓ ggplot2 3.3.5 ✓ purrr 0.3.4 ## ✓ tibble 3.1.2 ✓ dplyr 1.0.7 ## ✓ tidyr 1.1.3 ✓ stringr 1.4.0 ## ✓ readr 1.4.0 ✓ forcats 0.5.1 ## ─ Conflicts ───────────────────── tidyverse_conflicts() ─ ## x dplyr::filter() masks stats::filter() ## x dplyr::lag() masks stats::lag() library(sf) ## Linking to GEOS 3.8.1, GDAL 3.2.1, PROJ 7.2.1 次に，先ほどdataフォルダに保存した410004saga.geojsonを， sfライブラリのst_read関数を使って読み込みます。 map &lt;- st_read(&quot;data/410004saga.geojson&quot;) ## Reading layer `410004saga&#39; from data source ## `/Users/kazukitamura/github/bookdowntest/data/410004saga.geojson&#39; ## using driver `GeoJSON&#39; ## Simple feature collection with 20 features and 4 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: 129.7368 ymin: 32.95054 xmax: 130.5424 ymax: 33.6189 ## Geodetic CRS: WGS 84 読み込んだmapデータをプロットします。 ggplot() + geom_sf(data = map) できました。簡単ですね。 3.4 地図投影変換 先ほど表示された佐賀県の地図は，横軸に経度を，縦軸に緯度をとった平面に "]]
