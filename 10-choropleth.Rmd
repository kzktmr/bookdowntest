# コロプレス・マップ（塗り分け地図）
  
## 概要

コロプレスマップ（塗り分け地図）を作成する方法を説明します。
佐賀県の市町村別人口密度の塗り分け地図を作成しましょう。

## データの準備

「[佐賀県オープンデータカタログサイト](https://odcs.bodik.jp/410004)」にある「[オープンデータマップ用データセット](https://data.bodik.jp/dataset/410004_opendatamap)」を使用します。

* 男女別人口総数及ひ世帯総数（市町村別）
* ポリゴン（市町村別）

上記2つのファイル（`410004saga.xlsx`と`410004saga.geojson`）をダウンロードしてください。
ワーキングディレクトリの直下に`data`フォルダを作成し，ダウンロードしたファイルを保存してください（今後，GISデータはこのフォルダに保存することにしましょう）。

## 地図の描画
まず，使用するライブラリを読み込みます。ここでは，`tidyverse`（地図の描画に使う`ggplot2`ライブラリが含まれています）に加えて，GISデータを扱うライブラリ`sf`を使用します。

```{r library}
library(tidyverse)
library(sf)
```

次に，先ほど`data`フォルダに保存した`410004saga.geojson`を，
`sf`ライブラリの`st_read`関数を使って読み込みます。

```{r read_map_data, cache=TRUE}
map <- st_read("data/410004saga.geojson")
```

読み込んだ`map`データをプロットします。

```{r plot_base_map, cache=TRUE}
ggplot() + geom_sf(data = map) 
```

できました。簡単ですね。

## 地図投影変換

先ほど表示された佐賀県の地図は，横軸に経度を，縦軸に緯度をとった平面に